<Window x:Class="UnnotiTools.UI.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Unnoti Migrator"
        Height="750"
        Width="1200"
        Background="#0B1E33"
        Foreground="White"
        WindowStartupLocation="CenterScreen">

    
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="60"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="220"/>
        </Grid.RowDefinitions>

        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="260"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <!-- ================= HEADER ================= -->
        <Border Grid.Row="0"
                Grid.ColumnSpan="2"
                Background="#0F2A44"
                Padding="16">
            <DockPanel>
                <!-- Logo -->
                <Image Width="36"
       Height="36"
       Margin="0,0,12,0"
       Source="pack://application:,,,/Assets/logo.png"
       DockPanel.Dock="Left"/>

                <!-- App Name -->
                <TextBlock Text="Unnoti Migrator"
                           FontSize="20"
                           FontWeight="SemiBold"
                           VerticalAlignment="Center"/>

                <!-- Help -->
                <TextBlock Text="ⓘ Help"
                           Foreground="#C7D4E5"
                           Cursor="Hand"
                           VerticalAlignment="Center"
                           DockPanel.Dock="Right"/>
            </DockPanel>
        </Border>

        <!-- ================= LEFT CONNECTOR LIST ================= -->
        <Border Grid.Row="1"
                Grid.Column="0"
                Background="#0F2A44"
                Padding="8">

            <StackPanel>
                <TextBlock Text="CONNECTORS"
                           FontSize="12"
                           Foreground="#C7D4E5"
                           Margin="8,4"/>

                <ListBox ItemsSource="{Binding Connectors}"
                         SelectedItem="{Binding SelectedConnector}"
                         DisplayMemberPath="Name"
                         Background="Transparent"
                         BorderThickness="0"
                         Foreground="White">

                    <ListBox.ItemContainerStyle>
                        <Style TargetType="ListBoxItem">
                            <Setter Property="Padding" Value="10"/>
                            <Setter Property="Margin" Value="4"/>
                            <Setter Property="Background" Value="Transparent"/>
                            <Setter Property="Cursor" Value="Hand"/>

                            <Setter Property="Template">
                                <Setter.Value>
                                    <ControlTemplate TargetType="ListBoxItem">
                                        <Border Background="{TemplateBinding Background}"
                                                CornerRadius="6">
                                            <ContentPresenter/>
                                        </Border>
                                    </ControlTemplate>
                                </Setter.Value>
                            </Setter>

                            <Style.Triggers>
                                <Trigger Property="IsSelected" Value="True">
                                    <Setter Property="Background" Value="#1F6FEB"/>
                                </Trigger>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter Property="Background" Value="#163A5F"/>
                                </Trigger>
                            </Style.Triggers>
                        </Style>
                    </ListBox.ItemContainerStyle>

                </ListBox>
            </StackPanel>
        </Border>

        <!-- ================= CONFIG EDITOR ================= -->
        <Border Grid.Row="1"
                Grid.Column="1"
                Background="#122C4A"
                Padding="20"
                Margin="10">

            <DockPanel>

                <!-- Title -->
                <TextBlock Text="{Binding SelectedConnector.Name}"
                           FontSize="18"
                           FontWeight="SemiBold"
                           DockPanel.Dock="Top"
                           Margin="0,0,0,16"/>

                <!-- Config Fields -->
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <ItemsControl ItemsSource="{Binding ConfigItems}">
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <StackPanel Margin="0,0,0,14">
                                    <TextBlock Text="{Binding Key}"
                                               Foreground="#C7D4E5"
                                               Margin="0,0,0,4"/>
                                    <TextBox Text="{Binding Value, UpdateSourceTrigger=PropertyChanged}"
                                             Height="34"
                                             Background="#0B1E33"
                                             Foreground="White"
                                             BorderBrush="#1F6FEB"
                                             Padding="8"/>
                                </StackPanel>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                </ScrollViewer>

                <!-- ACTION BUTTONS -->
                <StackPanel Orientation="Horizontal"
                            HorizontalAlignment="Right"
                            DockPanel.Dock="Bottom"
                            Margin="0,16,0,0">

                    <Button Content="Cancel"
                            Width="100"
                            Height="36"
                            Margin="0,0,10,0"
                            Background="#2A3F5F"
                            Foreground="White"/>

                    <Button Content="Run Migration"
        Width="140"
        Height="36"
        Background="#1F6FEB"
        Foreground="White"
        Command="{Binding RunCommand}"
        IsEnabled="{Binding IsRunning, Converter={StaticResource InverseBoolConverter}}"/>
                </StackPanel>

            </DockPanel>
        </Border>

        <!-- ================= LOG PANEL ================= -->
        <Border Grid.Row="2"
                Grid.ColumnSpan="2"
                Background="#0F2A44"
                Padding="10">

            <DockPanel>
                <TextBlock Text="RUN LOGS"
                           Foreground="#C7D4E5"
                           DockPanel.Dock="Top"
                           Margin="4"/>

                <TextBox Text="{Binding Logs}"
                         IsReadOnly="True"
                         Background="#0B1E33"
                         Foreground="White"
                         BorderThickness="0"
                         VerticalScrollBarVisibility="Auto"
                         Padding="8"/>
            </DockPanel>
        </Border>

        <Grid Grid.RowSpan="3"
      Grid.ColumnSpan="2"
      Background="#80000000"
      Visibility="{Binding IsRunning, Converter={StaticResource BoolToVisibilityConverter}}">

            <StackPanel HorizontalAlignment="Center"
                VerticalAlignment="Center"
                Background="#0F2A44"
            >

                <TextBlock Text="Running Migration..."
                   Foreground="White"
                   FontSize="16"
                   Margin="0,0,0,12"
                   HorizontalAlignment="Center"/>

                <ProgressBar Width="220"
                     Height="8"
                     IsIndeterminate="True"/>
            </StackPanel>
        </Grid>

    </Grid>
            
            
</Window>
